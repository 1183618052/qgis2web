language: generic
sudo: required
dist: trusty

-before_install:
  - sudo apt-get -qq -y update

install:
  - sudo apt-get install python-software-properties
  - sudo add-apt-repository http://qgis.org/debian-ltr
  - sudo apt-get update
  - sudo apt-get install -y --force-yes qgis python-qgis xvfb
  - sudo pip install nose2

before_script:
  - export PATH=/usr/bin:$PATH

script:
  - pep8 --exclude=test ./
  - make pylint
  - xvfb-run nose2

notifications:
  email:
    - tom.chadwin@nnpa.org.uk
  webhooks:
    urls:
      - https://webhooks.gitter.im/e/5278d2ea8e892b8f3c32
    on_success: change  # options: [always|never|change] default: always
    on_failure: always  # options: [always|never|change] default: always
    on_start: never     # options: [always|never|change] default: always
